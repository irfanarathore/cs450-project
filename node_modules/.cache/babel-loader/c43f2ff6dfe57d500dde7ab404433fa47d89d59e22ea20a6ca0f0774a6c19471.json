{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\n/**\n * Custom hook to load and parse the disaster dataset from CSV\n * @returns {Object} { data, loading, error }\n */\nfunction useDisasterData() {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    // Load CSV data\n    d3.csv('/data/disasters.csv').then(rawData => {\n      // Parse and transform the data\n      const parsedData = rawData.map(d => {\n        // Parse date\n        const dateStr = d.date;\n        const parsedDate = new Date(dateStr);\n        return {\n          // Original fields\n          date: parsedDate,\n          country: d.country,\n          disaster_type: d.disaster_type,\n          // Numeric fields - convert to numbers\n          severity_index: +d.severity_index || 0,\n          casualties: +d.casualties || 0,\n          economic_loss_usd: +d.economic_loss_usd || 0,\n          response_time_hours: +d.response_time_hours || 0,\n          aid_amount_usd: +d.aid_amount_usd || 0,\n          response_efficiency_score: +d.response_efficiency_score || 0,\n          recovery_days: +d.recovery_days || 0,\n          latitude: +d.latitude || 0,\n          longitude: +d.longitude || 0,\n          // Derived fields\n          year: parsedDate.getFullYear(),\n          month: parsedDate.getMonth() + 1,\n          yearMonth: `${parsedDate.getFullYear()}-${String(parsedDate.getMonth() + 1).padStart(2, '0')}`\n        };\n      });\n\n      // Filter out any invalid entries\n      const validData = parsedData.filter(d => !isNaN(d.date.getTime()) && d.country && d.disaster_type);\n      console.log(`Loaded ${validData.length} disaster events`);\n      console.log('Sample data:', validData.slice(0, 3));\n      console.log('Years range:', d3.extent(validData, d => d.year));\n      console.log('Unique disaster types:', [...new Set(validData.map(d => d.disaster_type))]);\n      console.log('Unique countries:', validData.map(d => d.country).filter((v, i, a) => a.indexOf(v) === i).length);\n      setData(validData);\n      setLoading(false);\n    }).catch(err => {\n      console.error('Error loading disaster data:', err);\n      setError(err.message);\n      setLoading(false);\n    });\n  }, []);\n  return {\n    data,\n    loading,\n    error\n  };\n}\n_s(useDisasterData, \"C4fiAW6C7RZgaKDoEXQgZpbuUZg=\");\nexport default useDisasterData;","map":{"version":3,"names":["useState","useEffect","d3","useDisasterData","_s","data","setData","loading","setLoading","error","setError","csv","then","rawData","parsedData","map","d","dateStr","date","parsedDate","Date","country","disaster_type","severity_index","casualties","economic_loss_usd","response_time_hours","aid_amount_usd","response_efficiency_score","recovery_days","latitude","longitude","year","getFullYear","month","getMonth","yearMonth","String","padStart","validData","filter","isNaN","getTime","console","log","length","slice","extent","Set","v","i","a","indexOf","catch","err","message"],"sources":["/Users/irfanali/GitHub/CS450/CS450Project/src/hooks/useDisasterData.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\n/**\n * Custom hook to load and parse the disaster dataset from CSV\n * @returns {Object} { data, loading, error }\n */\nfunction useDisasterData() {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Load CSV data\n    d3.csv('/data/disasters.csv')\n      .then((rawData) => {\n        // Parse and transform the data\n        const parsedData = rawData.map((d) => {\n          // Parse date\n          const dateStr = d.date;\n          const parsedDate = new Date(dateStr);\n          \n          return {\n            // Original fields\n            date: parsedDate,\n            country: d.country,\n            disaster_type: d.disaster_type,\n            \n            // Numeric fields - convert to numbers\n            severity_index: +d.severity_index || 0,\n            casualties: +d.casualties || 0,\n            economic_loss_usd: +d.economic_loss_usd || 0,\n            response_time_hours: +d.response_time_hours || 0,\n            aid_amount_usd: +d.aid_amount_usd || 0,\n            response_efficiency_score: +d.response_efficiency_score || 0,\n            recovery_days: +d.recovery_days || 0,\n            latitude: +d.latitude || 0,\n            longitude: +d.longitude || 0,\n            \n            // Derived fields\n            year: parsedDate.getFullYear(),\n            month: parsedDate.getMonth() + 1,\n            yearMonth: `${parsedDate.getFullYear()}-${String(parsedDate.getMonth() + 1).padStart(2, '0')}`\n          };\n        });\n\n        // Filter out any invalid entries\n        const validData = parsedData.filter(d => \n          !isNaN(d.date.getTime()) && \n          d.country && \n          d.disaster_type\n        );\n\n        console.log(`Loaded ${validData.length} disaster events`);\n        console.log('Sample data:', validData.slice(0, 3));\n        console.log('Years range:', d3.extent(validData, d => d.year));\n        console.log('Unique disaster types:', [...new Set(validData.map(d => d.disaster_type))]);\n        console.log('Unique countries:', validData.map(d => d.country).filter((v, i, a) => a.indexOf(v) === i).length);\n\n        setData(validData);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.error('Error loading disaster data:', err);\n        setError(err.message);\n        setLoading(false);\n      });\n  }, []);\n\n  return { data, loading, error };\n}\n\nexport default useDisasterData;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}