{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\n/**\n * Custom hook to load and parse the disaster dataset from CSV\n * @returns {Object} { data, loading, error }\n */\nfunction useDisasterData() {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    // Load CSV data\n    d3.csv(process.env.PUBLIC_URL + '/data/disasters.csv').then(rawData => {\n      // Parse and transform the data\n      const parsedData = rawData.map(d => {\n        // Parse date\n        const dateStr = d.date;\n        const parsedDate = new Date(dateStr);\n        return {\n          // Original fields\n          date: parsedDate,\n          country: d.country,\n          disaster_type: d.disaster_type,\n          // Numeric fields - convert to numbers\n          severity_index: +d.severity_index || 0,\n          casualties: +d.casualties || 0,\n          economic_loss_usd: +d.economic_loss_usd || 0,\n          response_time_hours: +d.response_time_hours || 0,\n          aid_amount_usd: +d.aid_amount_usd || 0,\n          response_efficiency_score: +d.response_efficiency_score || 0,\n          recovery_days: +d.recovery_days || 0,\n          latitude: +d.latitude || 0,\n          longitude: +d.longitude || 0,\n          // Derived fields\n          year: parsedDate.getFullYear(),\n          month: parsedDate.getMonth() + 1,\n          yearMonth: `${parsedDate.getFullYear()}-${String(parsedDate.getMonth() + 1).padStart(2, '0')}`\n        };\n      });\n\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          location: 'useDisasterData.js:48',\n          message: 'Before filtering - parsed data check',\n          data: {\n            parsedCount: parsedData.length,\n            firstThree: parsedData.slice(0, 3).map(d => ({\n              dateValid: !isNaN(d.date.getTime()),\n              country: d.country,\n              disaster_type: d.disaster_type\n            }))\n          },\n          timestamp: Date.now(),\n          sessionId: 'debug-session',\n          hypothesisId: 'A,E'\n        })\n      }).catch(() => {});\n      // #endregion\n\n      // Filter out any invalid entries\n      const validData = parsedData.filter((d, idx) => {\n        const isValid = !isNaN(d.date.getTime()) && d.country && d.disaster_type;\n        // #region agent log\n        if (idx < 3) {\n          fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              location: 'useDisasterData.js:52',\n              message: 'Filter check for first rows',\n              data: {\n                idx: idx,\n                dateCheck: !isNaN(d.date.getTime()),\n                dateValue: d.date.getTime(),\n                countryCheck: !!d.country,\n                countryValue: d.country,\n                disasterTypeCheck: !!d.disaster_type,\n                disasterTypeValue: d.disaster_type,\n                isValid: isValid\n              },\n              timestamp: Date.now(),\n              sessionId: 'debug-session',\n              hypothesisId: 'A,E'\n            })\n          }).catch(() => {});\n        }\n        // #endregion\n        return isValid;\n      });\n\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          location: 'useDisasterData.js:58',\n          message: 'After filtering - validation results',\n          data: {\n            validCount: validData.length,\n            totalParsed: parsedData.length,\n            filterRatio: validData.length / parsedData.length\n          },\n          timestamp: Date.now(),\n          sessionId: 'debug-session',\n          hypothesisId: 'A,E'\n        })\n      }).catch(() => {});\n      // #endregion\n\n      console.log(`Loaded ${validData.length} disaster events`);\n      console.log('Sample data:', validData.slice(0, 3));\n      console.log('Years range:', d3.extent(validData, d => d.year));\n      console.log('Unique disaster types:', [...new Set(validData.map(d => d.disaster_type))]);\n      console.log('Unique countries:', validData.map(d => d.country).filter((v, i, a) => a.indexOf(v) === i).length);\n      setData(validData);\n      setLoading(false);\n    }).catch(err => {\n      console.error('Error loading disaster data:', err);\n      setError(err.message);\n      setLoading(false);\n    });\n  }, []);\n  return {\n    data,\n    loading,\n    error\n  };\n}\n_s(useDisasterData, \"C4fiAW6C7RZgaKDoEXQgZpbuUZg=\");\nexport default useDisasterData;","map":{"version":3,"names":["useState","useEffect","d3","useDisasterData","_s","data","setData","loading","setLoading","error","setError","csv","process","env","PUBLIC_URL","then","rawData","parsedData","map","d","dateStr","date","parsedDate","Date","country","disaster_type","severity_index","casualties","economic_loss_usd","response_time_hours","aid_amount_usd","response_efficiency_score","recovery_days","latitude","longitude","year","getFullYear","month","getMonth","yearMonth","String","padStart","fetch","method","headers","body","JSON","stringify","location","message","parsedCount","length","firstThree","slice","dateValid","isNaN","getTime","timestamp","now","sessionId","hypothesisId","catch","validData","filter","idx","isValid","dateCheck","dateValue","countryCheck","countryValue","disasterTypeCheck","disasterTypeValue","validCount","totalParsed","filterRatio","console","log","extent","Set","v","i","a","indexOf","err"],"sources":["/Users/irfanali/GitHub/CS450/CS450Project/src/hooks/useDisasterData.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\n/**\n * Custom hook to load and parse the disaster dataset from CSV\n * @returns {Object} { data, loading, error }\n */\nfunction useDisasterData() {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Load CSV data\n    d3.csv(process.env.PUBLIC_URL + '/data/disasters.csv')\n      .then((rawData) => {\n        // Parse and transform the data\n        const parsedData = rawData.map((d) => {\n          // Parse date\n          const dateStr = d.date;\n          const parsedDate = new Date(dateStr);\n          \n          return {\n            // Original fields\n            date: parsedDate,\n            country: d.country,\n            disaster_type: d.disaster_type,\n            \n            // Numeric fields - convert to numbers\n            severity_index: +d.severity_index || 0,\n            casualties: +d.casualties || 0,\n            economic_loss_usd: +d.economic_loss_usd || 0,\n            response_time_hours: +d.response_time_hours || 0,\n            aid_amount_usd: +d.aid_amount_usd || 0,\n            response_efficiency_score: +d.response_efficiency_score || 0,\n            recovery_days: +d.recovery_days || 0,\n            latitude: +d.latitude || 0,\n            longitude: +d.longitude || 0,\n            \n            // Derived fields\n            year: parsedDate.getFullYear(),\n            month: parsedDate.getMonth() + 1,\n            yearMonth: `${parsedDate.getFullYear()}-${String(parsedDate.getMonth() + 1).padStart(2, '0')}`\n          };\n        });\n\n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useDisasterData.js:48',message:'Before filtering - parsed data check',data:{parsedCount:parsedData.length,firstThree:parsedData.slice(0,3).map(d=>({dateValid:!isNaN(d.date.getTime()),country:d.country,disaster_type:d.disaster_type}))},timestamp:Date.now(),sessionId:'debug-session',hypothesisId:'A,E'})}).catch(()=>{});\n        // #endregion\n        \n        // Filter out any invalid entries\n        const validData = parsedData.filter((d, idx) => {\n          const isValid = !isNaN(d.date.getTime()) && d.country && d.disaster_type;\n          // #region agent log\n          if (idx < 3) {\n            fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useDisasterData.js:52',message:'Filter check for first rows',data:{idx:idx,dateCheck:!isNaN(d.date.getTime()),dateValue:d.date.getTime(),countryCheck:!!d.country,countryValue:d.country,disasterTypeCheck:!!d.disaster_type,disasterTypeValue:d.disaster_type,isValid:isValid},timestamp:Date.now(),sessionId:'debug-session',hypothesisId:'A,E'})}).catch(()=>{});\n          }\n          // #endregion\n          return isValid;\n        });\n\n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useDisasterData.js:58',message:'After filtering - validation results',data:{validCount:validData.length,totalParsed:parsedData.length,filterRatio:validData.length/parsedData.length},timestamp:Date.now(),sessionId:'debug-session',hypothesisId:'A,E'})}).catch(()=>{});\n        // #endregion\n\n        console.log(`Loaded ${validData.length} disaster events`);\n        console.log('Sample data:', validData.slice(0, 3));\n        console.log('Years range:', d3.extent(validData, d => d.year));\n        console.log('Unique disaster types:', [...new Set(validData.map(d => d.disaster_type))]);\n        console.log('Unique countries:', validData.map(d => d.country).filter((v, i, a) => a.indexOf(v) === i).length);\n\n        setData(validData);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.error('Error loading disaster data:', err);\n        setError(err.message);\n        setLoading(false);\n      });\n  }, []);\n\n  return { data, loading, error };\n}\n\nexport default useDisasterData;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}