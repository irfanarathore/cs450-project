{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\n/**\n * Custom hook to load and parse the disaster dataset from CSV\n * @returns {Object} { data, loading, error }\n */\nfunction useDisasterData() {\n  _s();\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    // Load CSV data\n    d3.csv('/data/disasters.csv').then(rawData => {\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          location: 'useDisasterData.js:16',\n          message: 'CSV loaded - raw data check',\n          data: {\n            rowCount: rawData.length,\n            firstRow: rawData[0],\n            columnNames: rawData.length > 0 ? Object.keys(rawData[0]) : []\n          },\n          timestamp: Date.now(),\n          sessionId: 'debug-session',\n          hypothesisId: 'B,D'\n        })\n      }).catch(() => {});\n      // #endregion\n\n      // Parse and transform the data\n      const parsedData = rawData.map((d, idx) => {\n        // Parse date\n        const dateStr = d.date;\n        const parsedDate = new Date(dateStr);\n\n        // #region agent log\n        if (idx === 0) {\n          fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              location: 'useDisasterData.js:25',\n              message: 'First row parsing check',\n              data: {\n                dateStr: dateStr,\n                parsedDate: parsedDate.toString(),\n                isValidDate: !isNaN(parsedDate.getTime()),\n                country: d.country,\n                countryType: typeof d.country,\n                disaster_type: d.disaster_type,\n                disasterTypeType: typeof d.disaster_type,\n                rawFirstRow: d\n              },\n              timestamp: Date.now(),\n              sessionId: 'debug-session',\n              hypothesisId: 'A,B,E'\n            })\n          }).catch(() => {});\n        }\n        // #endregion\n\n        return {\n          // Original fields\n          date: parsedDate,\n          country: d.country,\n          disaster_type: d.disaster_type,\n          // Numeric fields - convert to numbers\n          severity_index: +d.severity_index || 0,\n          casualties: +d.casualties || 0,\n          economic_loss_usd: +d.economic_loss_usd || 0,\n          response_time_hours: +d.response_time_hours || 0,\n          aid_amount_usd: +d.aid_amount_usd || 0,\n          response_efficiency_score: +d.response_efficiency_score || 0,\n          recovery_days: +d.recovery_days || 0,\n          latitude: +d.latitude || 0,\n          longitude: +d.longitude || 0,\n          // Derived fields\n          year: parsedDate.getFullYear(),\n          month: parsedDate.getMonth() + 1,\n          yearMonth: `${parsedDate.getFullYear()}-${String(parsedDate.getMonth() + 1).padStart(2, '0')}`\n        };\n      });\n\n      // Filter out any invalid entries\n      const validData = parsedData.filter(d => !isNaN(d.date.getTime()) && d.country && d.disaster_type);\n      console.log(`Loaded ${validData.length} disaster events`);\n      console.log('Sample data:', validData.slice(0, 3));\n      console.log('Years range:', d3.extent(validData, d => d.year));\n      console.log('Unique disaster types:', [...new Set(validData.map(d => d.disaster_type))]);\n      console.log('Unique countries:', validData.map(d => d.country).filter((v, i, a) => a.indexOf(v) === i).length);\n      setData(validData);\n      setLoading(false);\n    }).catch(err => {\n      console.error('Error loading disaster data:', err);\n      setError(err.message);\n      setLoading(false);\n    });\n  }, []);\n  return {\n    data,\n    loading,\n    error\n  };\n}\n_s(useDisasterData, \"C4fiAW6C7RZgaKDoEXQgZpbuUZg=\");\nexport default useDisasterData;","map":{"version":3,"names":["useState","useEffect","d3","useDisasterData","_s","data","setData","loading","setLoading","error","setError","csv","then","rawData","fetch","method","headers","body","JSON","stringify","location","message","rowCount","length","firstRow","columnNames","Object","keys","timestamp","Date","now","sessionId","hypothesisId","catch","parsedData","map","d","idx","dateStr","date","parsedDate","toString","isValidDate","isNaN","getTime","country","countryType","disaster_type","disasterTypeType","rawFirstRow","severity_index","casualties","economic_loss_usd","response_time_hours","aid_amount_usd","response_efficiency_score","recovery_days","latitude","longitude","year","getFullYear","month","getMonth","yearMonth","String","padStart","validData","filter","console","log","slice","extent","Set","v","i","a","indexOf","err"],"sources":["/Users/irfanali/GitHub/CS450/CS450Project/src/hooks/useDisasterData.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport * as d3 from 'd3';\n\n/**\n * Custom hook to load and parse the disaster dataset from CSV\n * @returns {Object} { data, loading, error }\n */\nfunction useDisasterData() {\n  const [data, setData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Load CSV data\n    d3.csv('/data/disasters.csv')\n      .then((rawData) => {\n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useDisasterData.js:16',message:'CSV loaded - raw data check',data:{rowCount:rawData.length,firstRow:rawData[0],columnNames:rawData.length>0?Object.keys(rawData[0]):[]},timestamp:Date.now(),sessionId:'debug-session',hypothesisId:'B,D'})}).catch(()=>{});\n        // #endregion\n        \n        // Parse and transform the data\n        const parsedData = rawData.map((d, idx) => {\n          // Parse date\n          const dateStr = d.date;\n          const parsedDate = new Date(dateStr);\n          \n          // #region agent log\n          if (idx === 0) {\n            fetch('http://127.0.0.1:7242/ingest/accdc406-803f-4a93-9fb7-def01f06e7cc',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useDisasterData.js:25',message:'First row parsing check',data:{dateStr:dateStr,parsedDate:parsedDate.toString(),isValidDate:!isNaN(parsedDate.getTime()),country:d.country,countryType:typeof d.country,disaster_type:d.disaster_type,disasterTypeType:typeof d.disaster_type,rawFirstRow:d},timestamp:Date.now(),sessionId:'debug-session',hypothesisId:'A,B,E'})}).catch(()=>{});\n          }\n          // #endregion\n          \n          return {\n            // Original fields\n            date: parsedDate,\n            country: d.country,\n            disaster_type: d.disaster_type,\n            \n            // Numeric fields - convert to numbers\n            severity_index: +d.severity_index || 0,\n            casualties: +d.casualties || 0,\n            economic_loss_usd: +d.economic_loss_usd || 0,\n            response_time_hours: +d.response_time_hours || 0,\n            aid_amount_usd: +d.aid_amount_usd || 0,\n            response_efficiency_score: +d.response_efficiency_score || 0,\n            recovery_days: +d.recovery_days || 0,\n            latitude: +d.latitude || 0,\n            longitude: +d.longitude || 0,\n            \n            // Derived fields\n            year: parsedDate.getFullYear(),\n            month: parsedDate.getMonth() + 1,\n            yearMonth: `${parsedDate.getFullYear()}-${String(parsedDate.getMonth() + 1).padStart(2, '0')}`\n          };\n        });\n\n        // Filter out any invalid entries\n        const validData = parsedData.filter(d => \n          !isNaN(d.date.getTime()) && \n          d.country && \n          d.disaster_type\n        );\n\n        console.log(`Loaded ${validData.length} disaster events`);\n        console.log('Sample data:', validData.slice(0, 3));\n        console.log('Years range:', d3.extent(validData, d => d.year));\n        console.log('Unique disaster types:', [...new Set(validData.map(d => d.disaster_type))]);\n        console.log('Unique countries:', validData.map(d => d.country).filter((v, i, a) => a.indexOf(v) === i).length);\n\n        setData(validData);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.error('Error loading disaster data:', err);\n        setError(err.message);\n        setLoading(false);\n      });\n  }, []);\n\n  return { data, loading, error };\n}\n\nexport default useDisasterData;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}